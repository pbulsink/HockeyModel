<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic Usage • HockeyModel</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic Usage">
<meta property="og:description" content="HockeyModel">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">HockeyModel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2021</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-usage.html">Basic Usage</a>
    </li>
    <li>
      <a href="../articles/model-description.html">Model Description</a>
    </li>
    <li>
      <a href="../articles/updates-2021.html">2021 Updates</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pbulsink/HockeyModel/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="basic-usage_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic Usage</h1>
                        <h4 data-toc-skip class="author">Philip Bulsink</h4>
            
            <h4 data-toc-skip class="date">2019-11-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pbulsink/HockeyModel/blob/HEAD/vignettes/basic-usage.Rmd" class="external-link"><code>vignettes/basic-usage.Rmd</code></a></small>
      <div class="hidden name"><code>basic-usage.Rmd</code></div>

    </div>

    
    
<p>This vignette will describe basic usage of the model to predict games and generate graphics.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pbulsink/HockeyModel" class="external-link">HockeyModel</a></span><span class="op">)</span></code></pre></div>
<p>At it’s most simple, we’ll ask the model to retrieve the required data and predict results. You can specify a particular raw data location if you prefer by changing the data_dir parameter.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/updateModel.html">updateModel</a></span><span class="op">(</span>data_dir <span class="op">=</span> <span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/package_file.html" class="external-link">package_file</a></span><span class="op">(</span><span class="st">"data-raw"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We can call this directly because the package has historical data already saved within it. This historical data can always be viewed by calling <code><a href="../reference/scores.html">HockeyModel::scores</a></code>, in an interactive session, or more simply just <code>scores</code> if the package is loaded. Of course, this will return all historical data for the NHL and WHL since their inceptions, so it may be more interesting to subset this data. For examples, scores since the start of the 2019-2020 season can be viewed by calling <code>scores[scores$Date &gt; as.Date("2019-10-01"),]</code>.</p>
<p>Having performed the model update and retrieved the parameters by calling <code>model &lt;- updateModel()</code> above, we can generate predictions for today’s game(s).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/todayOdds.html">todayOdds</a></span><span class="op">(</span>params<span class="op">=</span><span class="va">model</span><span class="op">$</span><span class="va">params</span>, schedule <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">schedule</span><span class="op">)</span></code></pre></div>
<p><img src="https://github.com/pbulsink/HockeyModel/raw/master/prediction_results/graphics/today_odds.png" width="679px" height="525px" style="display: block; margin: auto;"></p>
<p>Playoff odds, president trophy odds, expected points, etc. can all be generated as well. Start by updating the predictions, then generate the images. Depending on how long it has been since predictions were generated, this may take some time.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/updatePredictions.html">updatePredictions</a></span><span class="op">(</span>data_dir <span class="op">=</span> <span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/package_file.html" class="external-link">package_file</a></span><span class="op">(</span><span class="st">"prediction_results"</span><span class="op">)</span>, scores <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">scores</span>, schedule <span class="op">=</span> <span class="va">model</span><span class="op">$</span><span class="va">schedule</span><span class="op">)</span>
<span class="fu"><a href="../reference/playoffOdds.html">playoffOdds</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="https://github.com/pbulsink/HockeyModel/raw/master/prediction_results/graphics/playoff_odds.png" width="679px" height="525px" style="display: block; margin: auto;"></p>
<p>There’s a playoff solver placed in the package. It works only before the playoffs start through the end of the first round, and returns a tibble of likely playoff position and progression for each team as a <code>tidyverse::tibble</code>. The results aren’t guaranteed to be accurate. We’ll look at what these playoff odds looked like as of the start of the 2021-2022 season. We’ll download the predictions file from that date so we don’t have to generate it ourselves.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/simulatePlayoffs.html">simulatePlayoffs</a></span><span class="op">(</span>summary_results <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">url</a></span><span class="op">(</span><span class="st">"https://github.com/pbulsink/HockeyModel/raw/master/prediction_results/2021-08-12-predictions.RDS"</span>,<span class="st">"rb"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; too early to mix in real-life series</span></code></pre>
<table class="table">
<caption>Playoff Simulation from the start of the 2021-2022 season</caption>
<thead><tr class="header">
<th align="left">Team</th>
<th align="right">Make_Playoffs</th>
<th align="right">Win_First_Round</th>
<th align="right">Win_Second_Round</th>
<th align="right">Win_Conference</th>
<th align="right">Win_Cup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Carolina Hurricanes</td>
<td align="right">0.9207460</td>
<td align="right">0.7</td>
<td align="right">0.6</td>
<td align="right">0.5</td>
<td align="right">0.3</td>
</tr>
<tr class="even">
<td align="left">New York Rangers</td>
<td align="right">0.5911496</td>
<td align="right">0.2</td>
<td align="right">0.2</td>
<td align="right">0.2</td>
<td align="right">0.2</td>
</tr>
<tr class="odd">
<td align="left">Calgary Flames</td>
<td align="right">0.7352868</td>
<td align="right">0.7</td>
<td align="right">0.7</td>
<td align="right">0.3</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">Tampa Bay Lightning</td>
<td align="right">0.9727486</td>
<td align="right">0.4</td>
<td align="right">0.3</td>
<td align="right">0.2</td>
<td align="right">0.1</td>
</tr>
<tr class="odd">
<td align="left">Edmonton Oilers</td>
<td align="right">0.8676234</td>
<td align="right">0.5</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">Nashville Predators</td>
<td align="right">0.7243262</td>
<td align="right">0.5</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
</tr>
<tr class="odd">
<td align="left">Toronto Maple Leafs</td>
<td align="right">0.8085304</td>
<td align="right">0.4</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">Colorado Avalanche</td>
<td align="right">0.9815791</td>
<td align="right">0.8</td>
<td align="right">0.6</td>
<td align="right">0.4</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Dallas Stars</td>
<td align="right">0.7717086</td>
<td align="right">0.4</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Florida Panthers</td>
<td align="right">0.8244212</td>
<td align="right">0.6</td>
<td align="right">0.4</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Vegas Golden Knights</td>
<td align="right">0.9891395</td>
<td align="right">0.3</td>
<td align="right">0.2</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">New York Islanders</td>
<td align="right">0.8276314</td>
<td align="right">0.5</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Washington Capitals</td>
<td align="right">0.6766338</td>
<td align="right">0.5</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Minnesota Wild</td>
<td align="right">0.6190810</td>
<td align="right">0.4</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Boston Bruins</td>
<td align="right">0.8473324</td>
<td align="right">0.3</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Pittsburgh Penguins</td>
<td align="right">0.8031802</td>
<td align="right">0.2</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">St. Louis Blues</td>
<td align="right">0.4021901</td>
<td align="right">0.2</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Winnipeg Jets</td>
<td align="right">0.7027451</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Montreal Canadiens</td>
<td align="right">0.3882194</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Arizona Coyotes</td>
<td align="right">0.1979199</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Columbus Blue Jackets</td>
<td align="right">0.0887844</td>
<td align="right">0.1</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Chicago</td>
<td align="right">0.3785589</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Vancouver Canucks</td>
<td align="right">0.3102155</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Los Angeles Kings</td>
<td align="right">0.1723986</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Philadelphia Flyers</td>
<td align="right">0.1013551</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">San Jose Sharks</td>
<td align="right">0.0851943</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Ottawa Senators</td>
<td align="right">0.0699035</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Anaheim Ducks</td>
<td align="right">0.0497225</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Detroit Red Wings</td>
<td align="right">0.0335217</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">New Jersey Devils</td>
<td align="right">0.0285314</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="odd">
<td align="left">Buffalo Sabres</td>
<td align="right">0.0173109</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
<tr class="even">
<td align="left">Seattle Kraken</td>
<td align="right">0.0123106</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
<td align="right">0.0</td>
</tr>
</tbody>
</table>
</div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Philip Bulsink.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
